CREATE TABLE Categorias
(
  Cat_id Int NOT NULL,
  Cat_tipo Varchar(50) NOT NULL
)
;

ALTER TABLE Categorias ADD PRIMARY KEY (Cat_id)
;

-- Table Lugar

CREATE TABLE Lugar
(
  Lugar_id Int NOT NULL,
  Lugar_nombre Varchar(100) NOT NULL,
  Prop_id Int NOT NULL,
  Cat_id Int NOT NULL,
  Loc_coordenadas Varchar(200) NOT NULL
)
;

ALTER TABLE Lugar ADD PRIMARY KEY (Lugar_id,Prop_id,Cat_id,Loc_coordenadas)
;

-- Table Propietarios

CREATE TABLE Propietarios
(
  Prop_id Int NOT NULL,
  Prop_nombre Varchar(100) NOT NULL,
  Prop_email Varchar(100) NOT NULL,
  Prop_telefono Int NOT NULL
)
;

ALTER TABLE Propietarios ADD PRIMARY KEY (Prop_id)
;

-- Table Comentarios

CREATE TABLE Comentarios
(
  Com_descripcion Varchar(300) NOT NULL,
  Com_numero Int NOT NULL,
  Usuario_id Int NOT NULL,
  Loc_coordenadas Varchar(200) NOT NULL
)
;

ALTER TABLE Comentarios ADD PRIMARY KEY (Com_numero,Usuario_id,Loc_coordenadas)
;

-- Table Usuarios

CREATE TABLE Usuarios
(
  Usuario_id Int NOT NULL,
  Usuario_nombre Varchar(50) NOT NULL,
  Usuario_email Varchar(100) NOT NULL,
  Loc_coordenadas Varchar(200) NOT NULL
)
;

ALTER TABLE Usuarios ADD PRIMARY KEY (Usuario_id,Loc_coordenadas)
;

-- Table Localizacion

CREATE TABLE Localizacion
(
  Loc_coordenadas Varchar(200) NOT NULL
)
;

ALTER TABLE Localizacion ADD PRIMARY KEY (Loc_coordenadas)
;

-- Create relationships section -------------------------------------------------

ALTER TABLE Lugar ADD CONSTRAINT FOREIGN KEY (Prop_id) REFERENCES Propietarios (Prop_id) ON DELETE NO ACTION ON UPDATE NO ACTION
;

ALTER TABLE Lugar ADD CONSTRAINT FOREIGN KEY (Cat_id) REFERENCES Categorias (Cat_id) ON DELETE NO ACTION ON UPDATE NO ACTION
;

ALTER TABLE Usuarios ADD CONSTRAINT FOREIGN KEY (Loc_coordenadas) REFERENCES Localizacion (Loc_coordenadas) ON DELETE NO ACTION ON UPDATE NO ACTION
;

ALTER TABLE Comentarios ADD CONSTRAINT FOREIGN KEY (Usuario_id, Loc_coordenadas) REFERENCES Usuarios (Usuario_id, Loc_coordenadas) ON DELETE NO ACTION ON UPDATE NO ACTION
;

ALTER TABLE Lugar ADD CONSTRAINT FOREIGN KEY (Loc_coordenadas) REFERENCES Localizacion (Loc_coordenadas) ON DELETE NO ACTION ON UPDATE NO ACTION
;
